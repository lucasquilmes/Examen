<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ravenclaw</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <h1 >examen</h1>
    <div class="main">
    </div>
    <script>
        fetch(`https://wizard-world-api.herokuapp.com/wizards `).then((data)=>{
            let info = data.json();
            return info;
        }).then((data)=>{
            displaydata(data);
        })


        function displaydata(data){
            console.log(data);
            var main = document.querySelector(".main");

            for(let i = 0;i<data.length;i++){
                console.log(data[i]);
                let box = document.createElement("div");
                box.setAttribute("class","box");
                let content =document.getElementById("content");

                main.appendChild(box);
                if(data[i].firstName==null){
                    box.innerHTML = `<h2>${data[i].lastName}</h2>`

                }
                else{
                    box.innerHTML = `<h2>${data[i].firstName} ${data[i].lastName}</h2>`
                }
                
                          
                for(let j = 0;j<data[i].elixirs.length;j++){
                    console.log(j)
              
                    let slice = document.createElement("button");
                    slice.setAttribute("class","slice");
                    box.appendChild(slice);
                    slice.innerHTML = `<p>${data[i].elixirs[j].name} <p> `
                        leerIngredientesElixir(data[i].elixirs[j].id);
                        slice.addEventListener('click', function () {
                            console.log('klk');
                            leerIngredientesElixir(data[i].elixirs[j].id);
                        });


                }
            }    
        }
        let ingredientsContainer = document.getElementById("ingredientsContainer");
        function leerIngredientesElixir(elixirId) {

            fetch(`https://wizard-world-api.herokuapp.com/elixirs/${elixirId}`)
            .then((data) => {
                return data.json();
            })
            .then((elixirdata) => {
                console.log(elixirdata);

                let ingredientes = "";

                for (let klk = 0; klk < elixirdata.ingredients.length; klk++) {
                    let parrafo = document.createElement("p");
                    parrafo.textContent = elixirdata.ingredients[klk];
                    ingredientsContainer.appendChild(parrafo);
                }
            })
        }
       

        
    </script>
</body>
</html>